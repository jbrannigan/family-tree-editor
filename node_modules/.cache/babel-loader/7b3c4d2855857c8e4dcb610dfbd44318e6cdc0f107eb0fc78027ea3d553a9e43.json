{"ast":null,"code":"// TreeView.js\nimport React,{useState}from\"react\";import\"./TreeView.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Row(_ref){let{children,level}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"tree-row\",style:{marginLeft:level*18}// indentation\n,children:children});}function Toggle(_ref2){let{visible,expanded,onClick}=_ref2;if(!visible)return/*#__PURE__*/_jsx(\"span\",{className:\"tree-toggle-spacer\"});return/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"tree-toggle\",\"aria-label\":expanded?\"Collapse\":\"Expand\",onClick:onClick,children:expanded?\"‚ñæ\":\"‚ñ∏\"});}function TreeNode(_ref3){let{node,level,onFocus,focusedNodeId}=_ref3;const[expanded,setExpanded]=useState(true);const hasChildren=Array.isArray(node.children)&&node.children.length>0;const isFocused=focusedNodeId===node.id;return/*#__PURE__*/_jsxs(\"li\",{className:\"tree-node\",children:[/*#__PURE__*/_jsxs(Row,{level:level,children:[/*#__PURE__*/_jsx(Toggle,{visible:hasChildren,expanded:expanded,onClick:()=>setExpanded(e=>!e)}),/*#__PURE__*/_jsx(\"span\",{className:`tree-node-name ${isFocused?\"focused\":\"\"}`,children:node.name||\"(unnamed)\"}),!isFocused&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"tree-focus-btn\",title:\"Focus\",onClick:()=>onFocus(node),children:\"\\uD83D\\uDD0D\"})]}),hasChildren&&expanded&&/*#__PURE__*/_jsx(\"ul\",{className:\"tree-children\",children:node.children.map((child,i)=>{var _child$id,_node$id;return/*#__PURE__*/_jsx(TreeNode,{node:child,level:level+1,onFocus:onFocus,focusedNodeId:focusedNodeId},(_child$id=child.id)!==null&&_child$id!==void 0?_child$id:`${(_node$id=node.id)!==null&&_node$id!==void 0?_node$id:node.name}-${i}`);})})]});}export default function TreeView(_ref4){let{tree,onFocus,focusedNodeId}=_ref4;if(!tree)return/*#__PURE__*/_jsx(\"div\",{children:\"No tree data available\"});const nodes=Array.isArray(tree)?tree:[tree];return/*#__PURE__*/_jsx(\"div\",{className:\"tree-view\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"tree-root\",children:nodes.map((n,i)=>{var _n$id;return/*#__PURE__*/_jsx(TreeNode,{node:n,level:0,onFocus:onFocus,focusedNodeId:focusedNodeId},(_n$id=n.id)!==null&&_n$id!==void 0?_n$id:`${n.name}-${i}`);})})});}","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Row","_ref","children","level","className","style","marginLeft","Toggle","_ref2","visible","expanded","onClick","type","TreeNode","_ref3","node","onFocus","focusedNodeId","setExpanded","hasChildren","Array","isArray","length","isFocused","id","e","name","title","map","child","i","_child$id","_node$id","TreeView","_ref4","tree","nodes","n","_n$id"],"sources":["/home/jbrannigan/src/familytree/src/TreeView.js"],"sourcesContent":["// TreeView.js\r\nimport React, { useState } from \"react\";\r\nimport \"./TreeView.css\";\r\n\r\nfunction Row({ children, level }) {\r\n  return (\r\n    <div\r\n      className=\"tree-row\"\r\n      style={{ marginLeft: level * 18 }} // indentation\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Toggle({ visible, expanded, onClick }) {\r\n  if (!visible) return <span className=\"tree-toggle-spacer\" />;\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      className=\"tree-toggle\"\r\n      aria-label={expanded ? \"Collapse\" : \"Expand\"}\r\n      onClick={onClick}\r\n    >\r\n      {expanded ? \"‚ñæ\" : \"‚ñ∏\"}\r\n    </button>\r\n  );\r\n}\r\n\r\nfunction TreeNode({ node, level, onFocus, focusedNodeId }) {\r\n  const [expanded, setExpanded] = useState(true);\r\n  const hasChildren = Array.isArray(node.children) && node.children.length > 0;\r\n  const isFocused = focusedNodeId === node.id;\r\n\r\n  return (\r\n    <li className=\"tree-node\">\r\n      <Row level={level}>\r\n        <Toggle\r\n          visible={hasChildren}\r\n          expanded={expanded}\r\n          onClick={() => setExpanded((e) => !e)}\r\n        />\r\n\r\n        <span className={`tree-node-name ${isFocused ? \"focused\" : \"\"}`}>\r\n          {node.name || \"(unnamed)\"}\r\n        </span>\r\n\r\n        {/* de-emphasized focus control */}\r\n        {!isFocused && (\r\n          <button\r\n            type=\"button\"\r\n            className=\"tree-focus-btn\"\r\n            title=\"Focus\"\r\n            onClick={() => onFocus(node)}\r\n          >\r\n            üîç\r\n          </button>\r\n        )}\r\n      </Row>\r\n\r\n      {hasChildren && expanded && (\r\n        <ul className=\"tree-children\">\r\n          {node.children.map((child, i) => (\r\n            <TreeNode\r\n              key={child.id ?? `${node.id ?? node.name}-${i}`}\r\n              node={child}\r\n              level={level + 1}\r\n              onFocus={onFocus}\r\n              focusedNodeId={focusedNodeId}\r\n            />\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default function TreeView({ tree, onFocus, focusedNodeId }) {\r\n  if (!tree) return <div>No tree data available</div>;\r\n  const nodes = Array.isArray(tree) ? tree : [tree];\r\n\r\n  return (\r\n    <div className=\"tree-view\">\r\n      <ul className=\"tree-root\">\r\n        {nodes.map((n, i) => (\r\n          <TreeNode\r\n            key={n.id ?? `${n.name}-${i}`}\r\n            node={n}\r\n            level={0}\r\n            onFocus={onFocus}\r\n            focusedNodeId={focusedNodeId}\r\n          />\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}